{"ast":null,"code":"export class Cell {\n  constructor(x, y, color, board) {\n    let figure = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : null;\n    this.x = void 0;\n    this.y = void 0;\n    this.color = void 0;\n    this.currentFigure = void 0;\n    this.isAvailable = void 0;\n    this.id = void 0;\n    this.board = void 0;\n    this.x = x;\n    this.y = y;\n    this.color = color;\n    this.currentFigure = figure;\n    this.isAvailable = false;\n    this.id = Math.random();\n    this.board = board;\n  }\n\n  moveFigure(target) {\n    if (this.currentFigure) {\n      target.currentFigure = this.currentFigure;\n      this.currentFigure = null;\n    }\n  }\n\n  isEmpty() {\n    return this.currentFigure === null;\n  }\n\n  isEmptyHorizontal(target) {\n    if (this.y !== target.y) {\n      return false;\n    }\n\n    const min = Math.min(this.x, target.x);\n    const max = Math.max(this.x, target.x);\n\n    for (let x = min + 1; x < max; x += 1) {\n      if (!this.board.getCell(this.y, x).isEmpty()) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  isEmptyVertical(target) {\n    if (this.x !== target.x) {\n      return false;\n    }\n\n    const min = Math.min(this.y, target.y);\n    const max = Math.max(this.y, target.y);\n\n    for (let y = min + 1; y < max; y += 1) {\n      if (!this.board.getCell(y, this.x).isEmpty()) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  isEmptyDiagonal(target) {\n    const absX = Math.abs(this.x - target.x);\n    const absY = Math.abs(this.y - target.y);\n\n    if (absX !== absY) {\n      return false;\n    }\n\n    const dirX = target.x > this.x ? 1 : -1;\n    const dirY = target.y > this.y ? 1 : -1;\n\n    for (let i = 0; i < absY; i += 1) {\n      if (!this.board.getCell(this.y + i * dirY, this.x + i * dirX).isEmpty()) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n}","map":{"version":3,"names":["Cell","constructor","x","y","color","board","figure","currentFigure","isAvailable","id","Math","random","moveFigure","target","isEmpty","isEmptyHorizontal","min","max","getCell","isEmptyVertical","isEmptyDiagonal","absX","abs","absY","dirX","dirY","i"],"sources":["/Users/alextsukanov/my-projects/chess/src/models/cell.ts"],"sourcesContent":["import { Colors, Nullable } from \"../consts\";\nimport { Board } from \"./board\";\nimport { Figure } from \"./figure\";\n\nexport class Cell {\n    readonly x: number;\n    readonly y: number;\n    readonly color: Colors;\n    currentFigure: Nullable<Figure>;\n    isAvailable: boolean;\n    id: number;\n    board: Board;\n\n    constructor(x: number, y: number, color: Colors, board: Board, figure: Nullable<Figure> = null) {\n        this.x = x;\n        this.y = y;\n        this.color = color;\n        this.currentFigure = figure;\n        this.isAvailable = false;\n        this.id = Math.random();\n        this.board = board;\n    }\n\n    public moveFigure(target: Cell) {\n        if (this.currentFigure) {\n            target.currentFigure = this.currentFigure;\n            this.currentFigure = null;\n        }\n    }\n\n    private isEmpty() {\n        return this.currentFigure === null;\n    }\n\n    public isEmptyHorizontal(target: Cell): boolean {\n        if (this.y !== target.y) {\n            return false;\n        }\n        const min = Math.min(this.x, target.x);\n        const max = Math.max(this.x, target.x);\n        for (let x = min + 1; x < max; x += 1) {\n            if (!this.board.getCell(this.y, x).isEmpty()) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    public isEmptyVertical(target: Cell): boolean {\n        if (this.x !== target.x) {\n            return false;\n        }\n        const min = Math.min(this.y, target.y);\n        const max = Math.max(this.y, target.y);\n        for (let y = min + 1; y < max; y += 1) {\n            if (!this.board.getCell(y, this.x).isEmpty()) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    public isEmptyDiagonal(target: Cell): boolean {\n        const absX = Math.abs(this.x - target.x);\n        const absY = Math.abs(this.y - target.y);\n        if (absX !== absY) {\n            return false;\n        }\n        const dirX = target.x > this.x ? 1 : -1;\n        const dirY = target.y > this.y ? 1 : -1;\n        for (let i = 0; i < absY; i += 1) {\n            if (!this.board.getCell(this.y + i * dirY, this.x + i * dirX).isEmpty()) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n}"],"mappings":"AAIA,OAAO,MAAMA,IAAN,CAAW;EASdC,WAAW,CAACC,CAAD,EAAYC,CAAZ,EAAuBC,KAAvB,EAAsCC,KAAtC,EAAqF;IAAA,IAAjCC,MAAiC,uEAAN,IAAM;IAAA,KARvFJ,CAQuF;IAAA,KAPvFC,CAOuF;IAAA,KANvFC,KAMuF;IAAA,KALhGG,aAKgG;IAAA,KAJhGC,WAIgG;IAAA,KAHhGC,EAGgG;IAAA,KAFhGJ,KAEgG;IAC5F,KAAKH,CAAL,GAASA,CAAT;IACA,KAAKC,CAAL,GAASA,CAAT;IACA,KAAKC,KAAL,GAAaA,KAAb;IACA,KAAKG,aAAL,GAAqBD,MAArB;IACA,KAAKE,WAAL,GAAmB,KAAnB;IACA,KAAKC,EAAL,GAAUC,IAAI,CAACC,MAAL,EAAV;IACA,KAAKN,KAAL,GAAaA,KAAb;EACH;;EAEMO,UAAU,CAACC,MAAD,EAAe;IAC5B,IAAI,KAAKN,aAAT,EAAwB;MACpBM,MAAM,CAACN,aAAP,GAAuB,KAAKA,aAA5B;MACA,KAAKA,aAAL,GAAqB,IAArB;IACH;EACJ;;EAEOO,OAAO,GAAG;IACd,OAAO,KAAKP,aAAL,KAAuB,IAA9B;EACH;;EAEMQ,iBAAiB,CAACF,MAAD,EAAwB;IAC5C,IAAI,KAAKV,CAAL,KAAWU,MAAM,CAACV,CAAtB,EAAyB;MACrB,OAAO,KAAP;IACH;;IACD,MAAMa,GAAG,GAAGN,IAAI,CAACM,GAAL,CAAS,KAAKd,CAAd,EAAiBW,MAAM,CAACX,CAAxB,CAAZ;IACA,MAAMe,GAAG,GAAGP,IAAI,CAACO,GAAL,CAAS,KAAKf,CAAd,EAAiBW,MAAM,CAACX,CAAxB,CAAZ;;IACA,KAAK,IAAIA,CAAC,GAAGc,GAAG,GAAG,CAAnB,EAAsBd,CAAC,GAAGe,GAA1B,EAA+Bf,CAAC,IAAI,CAApC,EAAuC;MACnC,IAAI,CAAC,KAAKG,KAAL,CAAWa,OAAX,CAAmB,KAAKf,CAAxB,EAA2BD,CAA3B,EAA8BY,OAA9B,EAAL,EAA8C;QAC1C,OAAO,KAAP;MACH;IACJ;;IACD,OAAO,IAAP;EACH;;EAEMK,eAAe,CAACN,MAAD,EAAwB;IAC1C,IAAI,KAAKX,CAAL,KAAWW,MAAM,CAACX,CAAtB,EAAyB;MACrB,OAAO,KAAP;IACH;;IACD,MAAMc,GAAG,GAAGN,IAAI,CAACM,GAAL,CAAS,KAAKb,CAAd,EAAiBU,MAAM,CAACV,CAAxB,CAAZ;IACA,MAAMc,GAAG,GAAGP,IAAI,CAACO,GAAL,CAAS,KAAKd,CAAd,EAAiBU,MAAM,CAACV,CAAxB,CAAZ;;IACA,KAAK,IAAIA,CAAC,GAAGa,GAAG,GAAG,CAAnB,EAAsBb,CAAC,GAAGc,GAA1B,EAA+Bd,CAAC,IAAI,CAApC,EAAuC;MACnC,IAAI,CAAC,KAAKE,KAAL,CAAWa,OAAX,CAAmBf,CAAnB,EAAsB,KAAKD,CAA3B,EAA8BY,OAA9B,EAAL,EAA8C;QAC1C,OAAO,KAAP;MACH;IACJ;;IACD,OAAO,IAAP;EACH;;EAEMM,eAAe,CAACP,MAAD,EAAwB;IAC1C,MAAMQ,IAAI,GAAGX,IAAI,CAACY,GAAL,CAAS,KAAKpB,CAAL,GAASW,MAAM,CAACX,CAAzB,CAAb;IACA,MAAMqB,IAAI,GAAGb,IAAI,CAACY,GAAL,CAAS,KAAKnB,CAAL,GAASU,MAAM,CAACV,CAAzB,CAAb;;IACA,IAAIkB,IAAI,KAAKE,IAAb,EAAmB;MACf,OAAO,KAAP;IACH;;IACD,MAAMC,IAAI,GAAGX,MAAM,CAACX,CAAP,GAAW,KAAKA,CAAhB,GAAoB,CAApB,GAAwB,CAAC,CAAtC;IACA,MAAMuB,IAAI,GAAGZ,MAAM,CAACV,CAAP,GAAW,KAAKA,CAAhB,GAAoB,CAApB,GAAwB,CAAC,CAAtC;;IACA,KAAK,IAAIuB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,IAApB,EAA0BG,CAAC,IAAI,CAA/B,EAAkC;MAC9B,IAAI,CAAC,KAAKrB,KAAL,CAAWa,OAAX,CAAmB,KAAKf,CAAL,GAASuB,CAAC,GAAGD,IAAhC,EAAsC,KAAKvB,CAAL,GAASwB,CAAC,GAAGF,IAAnD,EAAyDV,OAAzD,EAAL,EAAyE;QACrE,OAAO,KAAP;MACH;IACJ;;IACD,OAAO,IAAP;EACH;;AAxEa"},"metadata":{},"sourceType":"module"}