{"ast":null,"code":"var _jsxFileName = \"/Users/alextsukanov/my-projects/chess/src/components/timer/timer.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport { Colors } from '../../models/colors';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Timer = _ref => {\n  _s();\n\n  let {\n    currentPlayer,\n    restart\n  } = _ref;\n  const [blackTime, setBlackTime] = useState(300);\n  const [whiteTime, setWhiteTime] = useState(300);\n  const timer = useRef(null);\n  useEffect(() => {\n    startTimer();\n  }, [currentPlayer]);\n\n  const startTimer = () => {\n    if (timer.current) {\n      clearInterval(timer.current);\n    }\n\n    const callback = () => (currentPlayer === null || currentPlayer === void 0 ? void 0 : currentPlayer.color) === Colors.BLACK ? decrementBlackTimer() : decrementWhiteTimer();\n\n    timer.current = setInterval(callback, 1000);\n  };\n\n  function decrementBlackTimer() {\n    setBlackTime(prev => prev - 1);\n  }\n\n  ;\n\n  function decrementWhiteTimer() {\n    setWhiteTime(prev => prev - 1);\n  }\n\n  ;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: restart,\n      children: \"Restart game\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"Black: \", blackTime]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: [\"White: \", whiteTime]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 37,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Timer, \"iCLlVO7I5GgDlON2NnW14YDL6s0=\");\n\n_c = Timer;\nexport default Timer;\n\nvar _c;\n\n$RefreshReg$(_c, \"Timer\");","map":{"version":3,"names":["React","useEffect","useRef","useState","Colors","Timer","currentPlayer","restart","blackTime","setBlackTime","whiteTime","setWhiteTime","timer","startTimer","current","clearInterval","callback","color","BLACK","decrementBlackTimer","decrementWhiteTimer","setInterval","prev"],"sources":["/Users/alextsukanov/my-projects/chess/src/components/timer/timer.tsx"],"sourcesContent":["import React, { FC, useEffect, useRef, useState } from 'react';\nimport { Player } from '../../models/player';\nimport { Colors } from '../../models/colors';\n\ninterface Props {\n    currentPlayer: Player | null;\n    restart: () => void;\n}\n\nconst Timer: FC<Props> = ({currentPlayer, restart}) => {\n    const [blackTime, setBlackTime] = useState(300);\n    const [whiteTime, setWhiteTime] = useState(300);\n    const timer = useRef<null | ReturnType<typeof setInterval>>(null);\n\n    useEffect(() => {\n        startTimer();\n    }, [currentPlayer])\n\n    const startTimer = () => {\n        if (timer.current) {\n            clearInterval(timer.current);\n        }\n\n        const callback = () => currentPlayer?.color === Colors.BLACK ? decrementBlackTimer() : decrementWhiteTimer();\n        timer.current = setInterval(callback, 1000);\n    };\n\n    function decrementBlackTimer() {\n        setBlackTime(prev => prev - 1);\n    };\n\n    function decrementWhiteTimer() {\n        setWhiteTime(prev => prev - 1);\n    };\n\n    return (\n        <div>\n            <button onClick={restart}>\n                Restart game\n            </button>\n\n            <h2>Black: {blackTime}</h2>\n            <h2>White: {whiteTime}</h2>\n        </div>\n    )\n}\n\nexport default Timer;"],"mappings":";;;AAAA,OAAOA,KAAP,IAAoBC,SAApB,EAA+BC,MAA/B,EAAuCC,QAAvC,QAAuD,OAAvD;AAEA,SAASC,MAAT,QAAuB,qBAAvB;;;AAOA,MAAMC,KAAgB,GAAG,QAA8B;EAAA;;EAAA,IAA7B;IAACC,aAAD;IAAgBC;EAAhB,CAA6B;EACnD,MAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BN,QAAQ,CAAC,GAAD,CAA1C;EACA,MAAM,CAACO,SAAD,EAAYC,YAAZ,IAA4BR,QAAQ,CAAC,GAAD,CAA1C;EACA,MAAMS,KAAK,GAAGV,MAAM,CAAwC,IAAxC,CAApB;EAEAD,SAAS,CAAC,MAAM;IACZY,UAAU;EACb,CAFQ,EAEN,CAACP,aAAD,CAFM,CAAT;;EAIA,MAAMO,UAAU,GAAG,MAAM;IACrB,IAAID,KAAK,CAACE,OAAV,EAAmB;MACfC,aAAa,CAACH,KAAK,CAACE,OAAP,CAAb;IACH;;IAED,MAAME,QAAQ,GAAG,MAAM,CAAAV,aAAa,SAAb,IAAAA,aAAa,WAAb,YAAAA,aAAa,CAAEW,KAAf,MAAyBb,MAAM,CAACc,KAAhC,GAAwCC,mBAAmB,EAA3D,GAAgEC,mBAAmB,EAA1G;;IACAR,KAAK,CAACE,OAAN,GAAgBO,WAAW,CAACL,QAAD,EAAW,IAAX,CAA3B;EACH,CAPD;;EASA,SAASG,mBAAT,GAA+B;IAC3BV,YAAY,CAACa,IAAI,IAAIA,IAAI,GAAG,CAAhB,CAAZ;EACH;;EAAA;;EAED,SAASF,mBAAT,GAA+B;IAC3BT,YAAY,CAACW,IAAI,IAAIA,IAAI,GAAG,CAAhB,CAAZ;EACH;;EAAA;EAED,oBACI;IAAA,wBACI;MAAQ,OAAO,EAAEf,OAAjB;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QADJ,eAKI;MAAA,sBAAYC,SAAZ;IAAA;MAAA;MAAA;MAAA;IAAA,QALJ,eAMI;MAAA,sBAAYE,SAAZ;IAAA;MAAA;MAAA;MAAA;IAAA,QANJ;EAAA;IAAA;IAAA;IAAA;EAAA,QADJ;AAUH,CApCD;;GAAML,K;;KAAAA,K;AAsCN,eAAeA,KAAf"},"metadata":{},"sourceType":"module"}